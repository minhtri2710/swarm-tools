{"id":"opencode-swarm-monorepo-lf2p4u-mjepneb3e6h","title":"Fix remaining 9 test failures","description":"Three distinct issue groups:\n\n1. **swarm_decompose/plan_prompt** (3 failures) - Prompt content assertions failing. Tests expect certain content in generated prompts that isn't there.\n\n2. **Checkpoint/Recovery** (3 failures) - \"there is no unique or exclusion constraint matching the ON CONFLICT specification\" - The swarm_contexts table is missing a unique constraint needed for UPSERT operations.\n\n3. **FTS search** (1 failure) - Full-text search fallback test failing. Likely missing FTS5 virtual table or triggers in test setup.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-20T19:48:02.991Z","updated_at":"2025-12-20T20:02:34.360Z","closed_at":"2025-12-20T20:02:34.360Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjepneb7ybq","title":"Fix swarm_decompose and swarm_plan_prompt tests","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-20T19:48:02.995Z","updated_at":"2025-12-20T20:02:27.546Z","closed_at":"2025-12-20T20:02:27.546Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjepneb3e6h","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjepneba91m","title":"Fix checkpoint/recovery - add unique constraint to swarm_contexts","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-20T19:48:02.998Z","updated_at":"2025-12-20T20:02:29.114Z","closed_at":"2025-12-20T20:02:29.114Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjepneb3e6h","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjepnebcihu","title":"Fix FTS search fallback test","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-20T19:48:03.000Z","updated_at":"2025-12-20T20:02:30.940Z","closed_at":"2025-12-20T20:02:30.940Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjepneb3e6h","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9s8wtmt1","title":"Test cell from debug session","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T05:11:41.597Z","updated_at":"2025-12-21T05:13:10.413Z","closed_at":"2025-12-21T05:13:10.413Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9ovwf","title":"Migration runner with schema validation","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T05:17:13.836Z","updated_at":"2025-12-21T05:41:15.798Z","closed_at":"2025-12-21T05:41:15.798Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9zuyq","title":"Integration tests: hive_* tools (9 tools)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T05:17:13.847Z","updated_at":"2025-12-21T05:41:40.541Z","closed_at":"2025-12-21T05:41:40.541Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zda165l","title":"Integration tests: agentmail_* tools (11 tools)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T05:17:13.849Z","updated_at":"2025-12-21T05:41:41.871Z","closed_at":"2025-12-21T05:41:41.871Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zda2hg5","title":"Integration tests: semantic_memory_* tools (8 tools)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T05:17:13.850Z","updated_at":"2025-12-21T05:41:43.066Z","closed_at":"2025-12-21T05:41:43.066Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zda4z0b","title":"Integration tests: swarm_* tools (24 tools)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T05:17:13.852Z","updated_at":"2025-12-21T05:41:44.165Z","closed_at":"2025-12-21T05:41:44.165Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zda632z","title":"Integration tests: skills_* tools (9 tools)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T05:17:13.854Z","updated_at":"2025-12-21T05:41:16.982Z","closed_at":"2025-12-21T05:41:16.982Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zda7324","title":"Integration tests: structured_* + mandate_* tools (10 tools)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T05:17:13.855Z","updated_at":"2025-12-21T05:41:18.306Z","closed_at":"2025-12-21T05:41:18.306Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zda9lvj","title":"Integration tests: repo_* tools (5 tools)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T05:17:13.857Z","updated_at":"2025-12-21T05:41:19.312Z","closed_at":"2025-12-21T05:41:19.312Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9rprs","title":"Convert streams subsystem to Drizzle queries","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T05:17:13.839Z","updated_at":"2025-12-21T16:21:02.703Z","closed_at":"2025-12-21T16:21:02.703Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9uul8","title":"Convert memory subsystem to Drizzle queries","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T05:17:13.842Z","updated_at":"2025-12-21T16:21:03.936Z","closed_at":"2025-12-21T16:21:03.936Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9vceg","title":"Convert hive subsystem to Drizzle queries","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T05:17:13.843Z","updated_at":"2025-12-21T17:24:31.341Z","closed_at":"2025-12-21T17:24:31.341Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfxpg2wbk8","title":"Port DurableLock to libSQL","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T16:21:21.704Z","updated_at":"2025-12-21T16:27:15.787Z","closed_at":"2025-12-21T16:27:15.787Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfxpg2p165","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfxpg2zg9f","title":"Port DurableDeferred to libSQL","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T16:21:21.707Z","updated_at":"2025-12-21T16:37:40.796Z","closed_at":"2025-12-21T16:37:40.796Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfxpg2p165","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfxpg31hwz","title":"Port DurableCursor to libSQL","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T16:21:21.709Z","updated_at":"2025-12-21T16:37:42.151Z","closed_at":"2025-12-21T16:37:42.151Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfxpg2p165","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfxpg33y71","title":"Port DurableMailbox and ask pattern to libSQL","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T16:21:21.711Z","updated_at":"2025-12-21T16:48:17.096Z","closed_at":"2025-12-21T16:48:17.096Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfxpg2p165","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfxpg35hv2","title":"Remove PGLite from streams/index.ts exports","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T16:21:21.713Z","updated_at":"2025-12-21T17:24:33.638Z","closed_at":"2025-12-21T17:24:33.638Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfxpg2p165","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfyo44apwt","title":"Add Haiku-Powered Compaction Analysis","description":"Wire liteModel into plugin template and use it for pre-analysis during compaction.\n\n1. Parameterize getPluginWrapper() to accept liteModel\n2. Update compaction hook to call `opencode run -m <liteModel>` for pre-analysis\n3. Use output.prompt to replace compaction prompt with pre-analyzed state\n\nThis enables smarter compaction that preserves swarm state for continuation.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-21T16:48:19.162Z","updated_at":"2025-12-21T16:48:19.162Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfzlbckh37","title":"Create Hive/Cell Visualizer","description":"Build a visualizer for hive cells inspired by https://github.com/Dicklesworthstone/beads_viewer\n\nCould show:\n- Epic/subtask hierarchy\n- Cell status (open, in_progress, blocked, closed)\n- Dependencies between cells\n- Agent assignments\n- File reservations","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-21T17:14:08.180Z","updated_at":"2025-12-21T17:14:08.180Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfzm2qunwj","title":"Analyze agentic_coding_flywheel_setup for ideas","description":"Analyze https://github.com/Dicklesworthstone/agentic_coding_flywheel_setup for ideas to extract and improve our swarm system.\n\nLook for:\n- Workflow patterns\n- Agent coordination strategies\n- Learning/feedback loops\n- Tool integration patterns","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T17:14:43.686Z","updated_at":"2025-12-21T17:14:43.686Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfznai9mco","title":"Add Drizzle Kit migrations","description":"Use drizzle-kit for proper schema migrations instead of manual CREATE TABLE IF NOT EXISTS.\n\nBenefits:\n- Automatic migration generation from schema changes\n- Version tracking\n- Rollback support\n- Type-safe migrations\n\nWould replace the current ad-hoc migration logic in libsql-schema.ts.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-21T17:15:40.401Z","updated_at":"2025-12-21T17:15:40.401Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfzgw9c7gd","title":"Fix: SQLITE_ERROR no such column: stream in hive_create_epic","description":"When calling hive_create_epic, get error: SQLITE_ERROR: no such column: stream\n\nContext:\n- Happens when creating epic in a project\n- swarmmail_init may be reusing wrong project context\n- Schema migration may not have run on hive database\n\nLikely causes:\n1. Schema migration not run on hive SQLite database\n2. Wrong database being accessed (project path mismatch)\n3. cursors table schema change (stream column) not applied to existing DBs\n\nRelated to PGLite→libSQL migration - the cursors table schema changed from stream_id to stream column.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-21T17:10:42.000Z","updated_at":"2025-12-21T17:26:06.716Z","closed_at":"2025-12-21T17:26:06.716Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg00gnvf8y","title":"Fix P0: cursors table schema migration (stream column)","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T17:25:54.907Z","updated_at":"2025-12-21T17:32:38.681Z","closed_at":"2025-12-21T17:32:38.681Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg00gnmwui","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg00go0fga","title":"Fix agentmail_release integration tests (3 failing)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T17:25:54.912Z","updated_at":"2025-12-21T17:37:03.773Z","closed_at":"2025-12-21T17:37:03.773Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg00gnmwui","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg00go89jn","title":"Fix swarm_checkpoint integration tests (2 failing)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T17:25:54.920Z","updated_at":"2025-12-21T17:37:06.462Z","closed_at":"2025-12-21T17:37:06.462Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg00gnmwui","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg01a7xgtu","title":"Bug: hive_update cannot close cells (CHECK constraint fails)","description":"When calling hive_update with status='closed', get error:\n\n```\nSQLITE_CONSTRAINT_CHECK: CHECK constraint failed: (status = 'closed') = (closed_at IS NOT NULL)\n```\n\nRoot cause: The beads table has a CHECK constraint requiring closed_at to be set when status='closed'. hive_update doesn't set closed_at when changing status to closed.\n\nFix: Either:\n1. hive_update should set closed_at = NOW() when status='closed'\n2. Or hive_update should reject status='closed' and require hive_close instead\n\nLocation: packages/swarm-mail/src/hive/adapter.ts (updateCell method)","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-21T17:26:33.213Z","updated_at":"2025-12-21T17:32:40.860Z","closed_at":"2025-12-21T17:32:40.860Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg00gnmwui","title":"Fix P0 Schema Bug + Integration Tests + Effect Primitives","description":"Sequential risk-based approach: Fix cursors schema migration bug (P0), then fix 6 failing integration tests, consolidate duplicate schemas, and integrate DurableLock/DurableDeferred into swarm coordination.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-21T17:25:54.898Z","updated_at":"2025-12-21T17:48:25.022Z","closed_at":"2025-12-21T17:48:25.022Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg00goagh1","title":"Consolidate duplicate schema definitions","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T17:25:54.922Z","updated_at":"2025-12-21T17:45:23.718Z","closed_at":"2025-12-21T17:45:23.718Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg00gnmwui","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg00god17i","title":"Port DurableLock to libSQL/DatabaseAdapter","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T17:25:54.925Z","updated_at":"2025-12-21T17:48:17.068Z","closed_at":"2025-12-21T17:48:17.068Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg00gnmwui","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg00gogwct","title":"Port DurableDeferred to libSQL/DatabaseAdapter","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T17:25:54.928Z","updated_at":"2025-12-21T17:48:18.268Z","closed_at":"2025-12-21T17:48:18.268Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg00gnmwui","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","title":"Drizzle Migration + Plugin Integration Tests","description":"Convert all raw SQL to Drizzle ORM with proper migrations. Add happy-path integration tests for all 93 plugin tools. TDD approach: test first, then implement.\n\nBranch: feat/drizzle-migration-and-tests\n\n## Phase 1: Foundation (sequential)\n- Migration runner with schema validation\n\n## Phase 2: Drizzle Conversion (parallel after Phase 1)\n- Convert streams subsystem\n- Convert memory subsystem  \n- Convert hive subsystem\n\n## Phase 3: Cleanup (after Phase 2)\n- Remove duplicate schema definitions\n\n## Phase 4: Integration Tests (parallel, some depend on Phase 2)\n- hive_* tools (9)\n- agentmail_* tools (11)\n- semantic_memory_* tools (8)\n- swarm_* tools (24)\n- skills_* tools (9)\n- structured_* + mandate_* tools (10)\n- repo_* tools (5)","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-21T05:17:13.832Z","updated_at":"2025-12-21T18:01:12.967Z","closed_at":"2025-12-21T18:01:12.967Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9xs46","title":"Remove duplicate schema definitions","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T05:17:13.845Z","updated_at":"2025-12-21T18:01:04.308Z","closed_at":"2025-12-21T18:01:04.308Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfvn2w3yuv","title":"Drizzle Migration Phase 2: Fix Tests + Hive Conversion","description":"Complete Drizzle migration for swarm-mail package.\n\n## Context\n- Streams subsystem: ✅ Done (wrappers added)\n- Memory subsystem: ✅ Done (already uses Drizzle)\n- Hive subsystem: ❌ Still uses DatabaseAdapter with raw SQL\n\n## Approach\nKeep HiveAdapter interface, rewrite internals to use Drizzle ORM.\nFollow course-builder adapter-drizzle pattern: interface in core, Drizzle implementation under the hood.\n\n## Shared Context for Workers\n- Use `toSwarmDb()` to convert DatabaseAdapter → SwarmDb (Drizzle client)\n- Create wrapper functions matching old signatures for backward compat\n- Keep complex CTEs as raw SQL via `sql.raw()` if Drizzle can't express them\n- Schema source of truth: `packages/swarm-mail/src/db/schema/hive.ts`\n\n## Dependencies\n- Task 1 (fix tests) unblocks CI\n- Task 2 (hive conversion) is the main work\n- Task 3 (schema consolidation) depends on Task 2","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-21T15:23:32.067Z","updated_at":"2025-12-21T18:01:05.723Z","closed_at":"2025-12-21T18:01:05.723Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfvn2w82v6","title":"Fix 6 failing integration tests (CI blocker)","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T15:23:32.072Z","updated_at":"2025-12-21T18:00:54.686Z","closed_at":"2025-12-21T18:00:54.686Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfvn2w3yuv","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfvn2wanib","title":"Convert hive/store.ts to Drizzle","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T15:23:32.074Z","updated_at":"2025-12-21T18:00:56.179Z","closed_at":"2025-12-21T18:00:56.179Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfvn2w3yuv","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfvn2wcdxt","title":"Convert hive/projections.ts to Drizzle","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T15:23:32.076Z","updated_at":"2025-12-21T18:00:57.636Z","closed_at":"2025-12-21T18:00:57.636Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfvn2w3yuv","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfvn2webre","title":"Convert hive/queries.ts to Drizzle (or keep raw SQL for complex CTEs)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T15:23:32.078Z","updated_at":"2025-12-21T18:00:59.516Z","closed_at":"2025-12-21T18:00:59.516Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfvn2w3yuv","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfvn2wggoh","title":"Convert hive/comments.ts, labels.ts, dependencies.ts to Drizzle","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T15:23:32.080Z","updated_at":"2025-12-21T18:01:01.046Z","closed_at":"2025-12-21T18:01:01.046Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfvn2w3yuv","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfvn2wiku9","title":"Consolidate duplicate schema definitions","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T15:23:32.082Z","updated_at":"2025-12-21T18:01:02.609Z","closed_at":"2025-12-21T18:01:02.609Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfvn2w3yuv","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfxpg2p165","title":"Remove PGLite, Port Effect Primitives to libSQL","description":"Complete removal of PGLite infrastructure (except migration tools), port all Effect-TS durable primitives to use libSQL/DatabaseAdapter, and integrate DurableLock + DurableDeferred into swarm worker coordination.\n\n## Context\n- Upstream source: https://github.com/durable-streams/durable-streams\n- Effect primitives: DurableLock, DurableDeferred, DurableCursor, DurableMailbox\n- Current state: primitives use getDatabase() which returns PGLite\n- Target state: primitives accept DatabaseAdapter parameter (libSQL)\n\n## Execution Order\n1. Tasks 0-2 in parallel (Lock, Deferred, Cursor)\n2. Task 3 after 0-2 (Mailbox + ask pattern)\n3. Task 4 after 3 (Remove PGLite from exports)\n4. Tasks 5-6 in parallel after 4 (Integration into swarm)","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-21T16:21:21.697Z","updated_at":"2025-12-21T18:05:01.905Z","closed_at":"2025-12-21T18:05:01.905Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfxpg37mzq","title":"Integrate DurableLock into swarm file reservations","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T16:21:21.715Z","updated_at":"2025-12-21T18:05:03.058Z","closed_at":"2025-12-21T18:05:03.058Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfxpg2p165","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfxpg39jw6","title":"Integrate DurableDeferred into swarm task completion","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T16:21:21.717Z","updated_at":"2025-12-21T18:05:04.159Z","closed_at":"2025-12-21T18:05:04.159Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfxpg2p165","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg1elo7hfg","title":"Remove PGLite dead code from streams/index.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T18:04:54.199Z","updated_at":"2025-12-21T18:11:33.570Z","closed_at":"2025-12-21T18:11:33.570Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg1elo0g21","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg1elo0g21","title":"PGLite Cleanup + Effect Primitives Integration","description":"Remove dead PGLite code from streams/index.ts, integrate DurableLock into swarm file reservations, integrate DurableDeferred into swarm task completion. YOLO for v0.31.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-21T18:04:54.192Z","updated_at":"2025-12-21T18:24:36.778Z","closed_at":"2025-12-21T18:24:36.778Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg1elo9uoa","title":"Integrate DurableLock into swarm file reservations","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T18:04:54.201Z","updated_at":"2025-12-21T18:24:34.312Z","closed_at":"2025-12-21T18:24:34.312Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg1elo0g21","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg1eloagne","title":"Integrate DurableDeferred into swarm task completion","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T18:04:54.202Z","updated_at":"2025-12-21T18:24:35.188Z","closed_at":"2025-12-21T18:24:35.188Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg1elo0g21","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg2uw8rcvo","title":"Consolidate per-project DBs to centralized global DB","description":"Currently each project gets its own `.opencode/streams.db` database, with fallback to `~/.opencode/streams.db`. This causes:\n\n1. **Schema drift** - Different projects have different schema versions, causing \"no such column: stream\" errors\n2. **Migration complexity** - Need to migrate each project's DB separately\n3. **Disk bloat** - Multiple copies of similar data\n4. **Cross-project queries impossible** - Can't search across all projects\n\n**Proposed solution:**\n- Single global `~/.opencode/swarm-mail.db` for all projects\n- Project isolation via `project_key` column (already exists in schema)\n- Single migration path\n- Optional per-project override for special cases\n\n**Migration path:**\n1. Add migration tool to merge existing per-project DBs into global\n2. Update `getSwarmMailLibSQL()` to prefer global DB\n3. Deprecate per-project DB creation\n4. Clean up old per-project DBs after successful migration\n\n**Related issues:**\n- \"SQLITE_ERROR: no such column: stream\" errors in tests and other sessions\n- PGLite → libSQL migration incomplete in some projects","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-21T18:45:34.011Z","updated_at":"2025-12-21T19:10:18.780Z","closed_at":"2025-12-21T19:10:18.780Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg37qv7vim","title":"Auto-migration to centralized swarm tools database","description":"On swarmmail_init, detect old per-project DBs (.opencode/streams.db or .opencode/streams/ PGLite), migrate data to global ~/.opencode/swarm-mail.db, rename old DB to .backup with timestamp. Fast check on init, handles both libSQL and PGLite sources.\n\n## Design Decisions\n- Trigger: On swarmmail_init (natural entry point, once per session)\n- Old DB handling: Rename to .backup-<timestamp> (safe rollback)\n- Global DB: ~/.opencode/swarm-mail.db\n- Project isolation: via project_key column (already exists)\n\n## Lore (from DDIA)\n\"In most cases, a change to an application's features also requires a change to data that it stores\" - handle schema evolution gracefully, missing tables are OK.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-21T18:55:33.572Z","updated_at":"2025-12-21T19:10:16.910Z","closed_at":"2025-12-21T19:10:16.910Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg37qvlyi9","title":"Create complete auto-migration module","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T18:55:33.585Z","updated_at":"2025-12-21T19:09:14.664Z","closed_at":"2025-12-21T19:09:14.664Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg37qv7vim","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg37qvom6o","title":"Update getDatabasePath to use global DB","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T18:55:33.588Z","updated_at":"2025-12-21T19:09:16.029Z","closed_at":"2025-12-21T19:09:16.029Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg37qv7vim","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg37qvrqhw","title":"Integrate auto-migration into swarmmail_init","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T18:55:33.591Z","updated_at":"2025-12-21T19:09:17.831Z","closed_at":"2025-12-21T19:09:17.831Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg37qv7vim","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg37qw04am","title":"Add tests for auto-migration","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T18:55:33.600Z","updated_at":"2025-12-21T19:09:19.036Z","closed_at":"2025-12-21T19:09:19.036Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg37qv7vim","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg37qw2oq7","title":"Update exports and documentation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T18:55:33.602Z","updated_at":"2025-12-21T19:10:14.566Z","closed_at":"2025-12-21T19:10:14.566Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg37qv7vim","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg3injmw1p","title":"Fix global DB path: ~/.config/swarm-tools/swarm.db","description":"User requested path change after initial implementation.\n\nChange from: ~/.opencode/swarm-mail.db\nChange to: ~/.config/swarm-tools/swarm.db\n\nFiles to update:\n1. packages/swarm-mail/src/streams/auto-migrate.ts - getGlobalDbPath()\n2. packages/swarm-mail/src/streams/index.ts - getDatabasePath()\n3. Any tests that reference the old path\n\nRationale: Cleaner separation from OpenCode config, follows XDG conventions.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T19:04:02.482Z","updated_at":"2025-12-21T19:09:13.065Z","closed_at":"2025-12-21T19:09:13.065Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg37qv7vim","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg23zk1qi7","title":"Remove UBS scan from swarm_complete","description":"Remove the UBS scan step from swarm_complete. It's slowing things down and not providing value for the release.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T18:24:38.593Z","updated_at":"2025-12-21T19:44:05.642Z","closed_at":"2025-12-21T19:44:05.642Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg59pcddrx","title":"Holistic Docs Refresh","description":"Full documentation overhaul with practical focus. OpenCode users should be running /swarm in under 1 minute.\n\nGoals:\n- Keep the \"why\" (problem statement)\n- Accurate tech stack (libSQL not PGLite, no UBS scan)\n- Terminology: beads→hive/cells throughout\n- Sick ASCII art (bee/hive/swarm theme)\n- Quotes from pdf-brain sprinkled in\n- Diagrams where useful\n- No marketing fluff, just explanation\n- Use cases front and center\n\nQuote seeds from pdf-brain:\n- \"With event sourcing, you can design an event such that it is a self-contained description of a user action.\" — Kleppmann, DDIA\n- \"ROC accepts that failures will inevitably happen... investigations aim to improve survivability\" — Release It!\n- \"Architecture boils down to the important stuff—whatever that is.\" — Fowler, PEAA\n- \"High-variability sequencing of whole-task problems\" — 4C/ID Model","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-21T19:53:04.141Z","updated_at":"2025-12-21T19:59:12.464Z","closed_at":"2025-12-21T19:59:12.464Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg59pcltt5","title":"Homepage rewrite","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T19:53:04.149Z","updated_at":"2025-12-21T19:59:06.124Z","closed_at":"2025-12-21T19:59:06.124Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg59pcddrx","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg59pcnvlc","title":"Root README update","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T19:53:04.151Z","updated_at":"2025-12-21T19:59:07.923Z","closed_at":"2025-12-21T19:59:07.923Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg59pcddrx","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg59pcpwx4","title":"Plugin README update","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T19:53:04.153Z","updated_at":"2025-12-21T19:59:09.181Z","closed_at":"2025-12-21T19:59:09.181Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg59pcddrx","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg59pcsmey","title":"Web docs terminology sweep","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T19:53:04.156Z","updated_at":"2025-12-21T19:59:10.895Z","closed_at":"2025-12-21T19:59:10.895Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg59pcddrx","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg5hwga30a","title":"Evaluate CASS for inhousing - nuke the dep","description":"Deep dive into https://github.com/Dicklesworthstone/coding_agent_session_search\n\n**Goal:** Determine if we should bring CASS functionality in-house and eliminate the external Python dependency.\n\n**Questions to answer:**\n1. What agent session formats does it index? (Claude, Cursor, Codex, etc.)\n2. How does it build the search index? (embedding model, chunking strategy)\n3. What's the query interface? (semantic search, filters, ranking)\n4. How much of this overlaps with our semantic memory?\n5. What's unique/valuable that we'd lose without it?\n\n**If we inhouse:**\n- Scan agent session files ourselves (add to libSQL index)\n- Unify search: one `memory_find()` for both curated learnings AND historical sessions\n- Cross-agent support built into swarm-mail\n- No Python dep, no separate `cass index` command\n\n**Deliverables:**\n1. Architecture analysis doc\n2. Recommendation: inhouse vs keep dep vs hybrid\n3. If inhouse: implementation plan with effort estimate\n\n**Related:** We already have semantic-memory with libSQL + Ollama embeddings. CASS uses its own embedding pipeline. Could we unify?","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-21T19:59:26.602Z","updated_at":"2025-12-21T19:59:26.602Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg5owr6vxb","title":"Fix DB adapter wiring + add integration test coverage","description":"Eliminate all \"dbOverride parameter is required\" errors by fixing code that calls swarmMail.getDatabase() expecting raw query access. The adapter pattern requires passing DatabaseAdapter explicitly to store functions. Also add integration tests to catch these issues in the future.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-21T20:04:53.586Z","updated_at":"2025-12-21T21:02:57.661Z","closed_at":"2025-12-21T21:02:57.661Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg5owrdvkk","title":"Fix swarm-mail internals - remove getDatabase() requirement from store/projections","description":"REDO with proper TDD. Tests FIRST, then implementation. Previous attempt skipped to implementation.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T20:04:53.593Z","updated_at":"2025-12-21T20:21:55.877Z","closed_at":"2025-12-21T20:21:55.877Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg5owr6vxb","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg5owrf7bf","title":"Fix plugin runtime - update swarm-orchestrate.ts, hive.ts, memory-tools.ts, swarm-mail.ts","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T20:04:53.595Z","updated_at":"2025-12-21T20:32:30.032Z","closed_at":"2025-12-21T20:32:30.032Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg5owr6vxb","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg5owrhr3v","title":"Update test files using old getDatabase() pattern","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T20:04:53.597Z","updated_at":"2025-12-21T20:46:42.634Z","closed_at":"2025-12-21T20:46:42.634Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg5owr6vxb","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg5owrjo4f","title":"Add tool-layer integration tests that verify adapter wiring end-to-end","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T20:04:53.599Z","updated_at":"2025-12-21T20:54:41.568Z","closed_at":"2025-12-21T20:54:41.568Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg5owr6vxb","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjg6oywchz2","title":"Add mandatory coordinator review loop after worker completion","description":"The coordinator prompt in AGENTS.md mentions swarm_review but doesn't COMMAND it after every worker return.\n\nNeed to:\n1. Update swarm-prompts.ts to add a COORDINATOR_REVIEW_LOOP constant\n2. Update swarm_spawn_subtask to include post-completion instructions for coordinator\n3. Update bin/swarm.ts coordinator prompt to MANDATE the review loop\n4. Update global-skills/swarm-coordination/SKILL.md with explicit review requirements\n\nThe pattern should be:\n```\nTask(worker) returns → IMMEDIATELY:\n1. swarmmail_inbox() - check for worker messages\n2. swarm_review(project_key, epic_id, task_id, files_touched)\n3. Review the diff against epic goals\n4. swarm_review_feedback(status=\"approved|needs_changes\")\n5. ONLY THEN spawn next worker or complete\n```","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T20:32:55.980Z","updated_at":"2025-12-21T21:02:51.097Z","closed_at":"2025-12-21T21:02:51.097Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjg5owr6vxb","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjggwznl7gx","title":"Add PGlite deprecation warnings, remove in next major","description":"## Context\nPGlite migration code remains for backward compatibility but libSQL is now the only supported database.\n\n## What to do\n\n### Phase 1: Add Deprecation Warnings (this release)\n- `wrapPGlite()` in pglite.ts - add console.warn on first call\n- `toDrizzleDb()` PGlite branch - add console.warn when PGlite detected\n- `migratePGliteToLibSQL()` - add warning that this is last supported version\n- Update CHANGELOG with deprecation notice\n\n### Phase 2: Remove in Next Major (v1.0 or v0.32)\n- Remove pglite.ts entirely\n- Remove PGlite branch from toDrizzleDb()\n- Remove migrate-pglite-to-libsql.ts\n- Remove memory/migrate-legacy.ts PGlite code\n- Remove @electric-sql/pglite from dependencies\n- Remove drizzle-orm/pglite imports\n\n## Files affected\n- packages/swarm-mail/src/pglite.ts\n- packages/swarm-mail/src/libsql.convenience.ts\n- packages/swarm-mail/src/migrate-pglite-to-libsql.ts\n- packages/swarm-mail/src/memory/migrate-legacy.ts\n- packages/swarm-mail/package.json (remove dep)","status":"open","priority":2,"issue_type":"chore","created_at":"2025-12-22T01:19:06.369Z","updated_at":"2025-12-22T01:19:06.369Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgh4b3kmi1","title":"Fix PGLite typecheck errors in CI","description":"CI failing: Cannot find module '@electric-sql/pglite'. Migration files have static imports but PGLite is devDependency.\n\nFix: Convert static imports to dynamic imports in:\n- src/memory/migrate-legacy.ts (lines 146-147, 305-306)\n- src/migrate-pglite-to-libsql.ts (lines 93-94)\n- src/pglite.ts (line 10, plus fix implicit any on line 35)\n\nUse pattern from semantic memory: dynamic import inside functions, type assertions for results.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-22T01:24:47.792Z","updated_at":"2025-12-22T01:27:32.279Z","closed_at":"2025-12-22T01:27:32.279Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgha1ijy85","title":"Add @ts-ignore to PGLite dynamic imports","description":"Dynamic imports still get type-checked by TypeScript. Need to add @ts-ignore comments above each dynamic import line.\n\nFiles:\n- src/memory/migrate-legacy.ts (lines 146, 147, 305, 306)\n- src/migrate-pglite-to-libsql.ts (lines 93, 94)\n\nPattern:\n```typescript\n// @ts-ignore - PGLite is optional, loaded dynamically for migration only\nconst { PGlite } = (await import(\"@electric-sql/pglite\")) as any;\n// @ts-ignore - PGLite vector extension\nconst { vector } = (await import(\"@electric-sql/pglite/vector\")) as any;\n```","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-22T01:29:15.307Z","updated_at":"2025-12-22T01:30:59.948Z","closed_at":"2025-12-22T01:30:59.948Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjghm2c8rkt","title":"Fix migrate-legacy.test.ts PGLite import","description":"Test file still has static PGLite import:\n```\nerror: Cannot find module '@electric-sql/pglite' from '/home/runner/work/swarm-tools/swarm-tools/packages/swarm-mail/src/memory/migrate-legacy.test.ts'\n```\n\nNeed to either:\n1. Skip the test when PGLite isn't available\n2. Use dynamic import in the test file too\n3. Mark the test as integration-only","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-22T01:38:36.248Z","updated_at":"2025-12-22T01:43:02.311Z","closed_at":"2025-12-22T01:43:02.311Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjghm3oyxgp","title":"Fix cell ID prefix test - package.json name not found","description":"Test failing:\n```\nExpected substring or pattern: /^swarm-mail-[-a-z0-9]+-[a-z0-9]+$/\nReceived: \"cell--d02u8-mjghd0qj2bg\"\n```\n\nThe generateBeadId function isn't finding the package.json name in CI. The prefix is empty, resulting in `cell--` instead of `swarm-mail-`.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-22T01:38:38.002Z","updated_at":"2025-12-22T01:43:03.048Z","closed_at":"2025-12-22T01:43:03.048Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgi42mfkmv","title":"Fix agent-mail.test.ts - checkHealth and DurableLock tests using deprecated API","description":"Tests in agent-mail.test.ts are calling deprecated `checkHealth()` which now throws:\n```\n[agent-mail] checkHealth() has been removed. PGlite infrastructure is deprecated.\n```\n\nAffected tests:\n- checkHealth > returns healthy when database is accessible\n- checkHealth > returns stats about the store\n- DurableLock Integration > uses DurableLock for file reservation locking\n- DurableLock Integration > releases DurableLock when files are released\n- DurableLock Integration > respects lock expiry (TTL)\n- reserveAgentFiles tests (multiple)\n- releaseAgentFiles tests (multiple)\n\nOptions:\n1. Update tests to use createSwarmMailAdapter() pattern\n2. Skip these tests with a TODO to update later\n3. Restore checkHealth with adapter-based implementation\n\nGiven time pressure, option 2 (skip with TODO) is fastest.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-22T01:52:36.423Z","updated_at":"2025-12-22T01:56:25.828Z","closed_at":"2025-12-22T01:56:25.828Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgicv66eyc","title":"Fix missing resetDatabase/closeDatabase exports in test files","description":"Two test files import functions that were removed:\n- debug.test.ts imports resetDatabase\n- projections.test.ts imports closeDatabase\n\nThese functions were removed with PGLite. Need to either:\n1. Skip these tests\n2. Update to use adapter pattern","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-22T01:59:26.670Z","updated_at":"2025-12-22T02:05:24.529Z","closed_at":"2025-12-22T02:05:24.529Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgmdsjknsx","title":"Fix SQL injection in cursor.ts - use parameterized queries","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-22T03:52:08.385Z","updated_at":"2025-12-22T03:52:08.385Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjgmdsjc88p","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgmdsjosz1","title":"Fix SQL injection in lock.ts - use parameterized queries","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-22T03:52:08.388Z","updated_at":"2025-12-22T03:52:08.388Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjgmdsjc88p","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgmw8ad8da","title":"Fix swarm-mail.test.ts to use adapter pattern","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T04:06:28.597Z","updated_at":"2025-12-22T04:06:28.597Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjgmw89cjom","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgmw8ah72p","title":"Clean test artifacts and commit all fixes","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-22T04:06:28.601Z","updated_at":"2025-12-22T04:06:28.601Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjgmw89cjom","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgotvvoh8z","title":"Fix DatabaseAdapter import in agent-mail.ts (build broken)","description":"**CRITICAL: Build is broken**\n\nThe worker's changes to agent-mail.ts imported DatabaseAdapter from the wrong path:\n```typescript\nimport type { DatabaseAdapter } from \"../adapter\";  // WRONG\n```\n\nShould be:\n```typescript\nimport type { DatabaseAdapter } from \"../types/database\";  // CORRECT\n```\n\nError:\n```\nsrc/streams/agent-mail.ts(24,15): error TS2459: Module '\"../adapter\"' declares 'DatabaseAdapter' locally, but it is not exported.\n```\n\nThis blocks the entire release - typecheck and build both fail.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-22T05:00:38.436Z","updated_at":"2025-12-22T05:01:11.424Z","closed_at":"2025-12-22T05:01:11.424Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgpm1e5zjq","title":"sendSwarmMessage needs dbAdapter parameter for test isolation","description":"**Problem:** `sendSwarmMessage` in swarm-review.ts creates its own LibSQLAdapter internally, which fails with \"URL_INVALID\" for paths like `~/.config/swarm-tools/swarm.db`.\n\n**Impact:** \n- swarm_review_feedback integration tests can't use in-memory databases\n- Tests are skipped in swarm-review.integration.test.ts\n\n**Root cause:**\nsendSwarmMessage calls getSwarmMailLibSQL() without accepting a dbAdapter parameter, so it can't use the test's in-memory adapter.\n\n**Fix options:**\n1. Add dbAdapter parameter to swarm_review_feedback (breaking change)\n2. Make sendSwarmMessage use adapter cache (global state)\n3. Use file:// URLs for all database paths\n\n**Files:**\n- packages/opencode-swarm-plugin/src/swarm-review.ts\n- packages/opencode-swarm-plugin/src/swarm-review.integration.test.ts","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-22T05:22:31.949Z","updated_at":"2025-12-22T05:22:31.949Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgqqmtgx08","title":"swarmmail_health uses deprecated checkHealth() that was removed","description":"**Problem:** `swarmmail_health` tool calls the deprecated `checkHealth()` function that was removed during PGlite cleanup.\n\n**Error:**\n```\nHealth check failed: [agent-mail] checkHealth() has been removed. PGlite infrastructure is deprecated. Use createSwarmMailAdapter() and call adapter.checkHealth() instead.\n```\n\n**Expected:** Health check should use the new adapter pattern, not the removed function.\n\n**Fix:** Update swarmmail_health in swarm-mail.ts to use `createSwarmMailAdapter().checkHealth()` or equivalent libSQL health check.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-22T05:54:05.956Z","updated_at":"2025-12-22T06:13:21.000Z","closed_at":"2025-12-22T06:13:21.000Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgqqp1izbr","title":"swarmmail_inbox fails with \"no such table: messages\" - schema not initialized","description":"**Problem:** `swarmmail_inbox` fails because the messages table doesn't exist.\n\n**Error:**\n```\nFailed to fetch inbox: SQLITE_ERROR: no such table: messages\n```\n\n**Expected:** Schema should be auto-initialized when swarmmail tools are used, or `swarmmail_init` should ensure schema exists.\n\n**Root cause:** The libSQL schema initialization isn't being called before querying. Either:\n1. `swarmmail_init` doesn't create the schema\n2. `swarmmail_inbox` doesn't ensure schema exists before querying\n\n**Fix:** Ensure `createLibSQLStreamsSchema()` is called during init or before first query.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-22T05:54:08.838Z","updated_at":"2025-12-22T06:13:22.317Z","closed_at":"2025-12-22T06:13:22.317Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgmdsjc88p","title":"Fix PR #54 review comments","description":"Address CodeRabbit review comments:\n1. SQL injection vulnerabilities in cursor.ts and lock.ts\n2. Test pollution in .hive/memories.jsonl","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-22T03:52:08.376Z","updated_at":"2025-12-22T16:45:20.225Z","closed_at":"2025-12-22T16:45:20.225Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgmdsjq0gb","title":"Remove test artifacts from .hive/memories.jsonl","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T03:52:08.390Z","updated_at":"2025-12-22T16:45:25.538Z","closed_at":"2025-12-22T16:45:25.538Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjgmdsjc88p","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgmw89cjom","title":"PR #54: Fix skipped tests and resolve CodeRabbit comments","description":"Delete deprecated test files, fix/unskip remaining tests, commit SQL injection fixes, fix double file: prefix bug, clean test artifacts, push and resolve PR comments","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-22T04:06:28.560Z","updated_at":"2025-12-22T16:45:21.082Z","closed_at":"2025-12-22T16:45:21.082Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgmw89p9re","title":"Delete deprecated debug module and tests","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T04:06:28.573Z","updated_at":"2025-12-22T16:45:26.311Z","closed_at":"2025-12-22T16:45:26.311Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjgmw89cjom","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgmw89uekd","title":"Delete deprecated test files (migrations.test.ts, projections.test.ts)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T04:06:28.578Z","updated_at":"2025-12-22T16:45:27.218Z","closed_at":"2025-12-22T16:45:27.218Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjgmw89cjom","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgmw8a3wqf","title":"Fix double file: prefix in store-drizzle.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T04:06:28.587Z","updated_at":"2025-12-22T16:45:28.218Z","closed_at":"2025-12-22T16:45:28.218Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjgmw89cjom","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjgmw8a89uc","title":"Fix agent-mail.test.ts skipped reservation tests","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T04:06:28.592Z","updated_at":"2025-12-22T16:45:28.958Z","closed_at":"2025-12-22T16:45:28.958Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjgmw89cjom","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjhdvwcbb5f","title":"Clean test artifacts from .hive/","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T16:42:02.747Z","updated_at":"2025-12-22T16:44:06.368Z","closed_at":"2025-12-22T16:44:06.368Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjhdvwbu2iv","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjhdvwbu2iv","title":"PR #54 Final Cleanup","description":"Clean up test artifacts, fix test isolation, verify URL normalization fix, close orphan cells.\n\nContext from semantic memory:\n- sendSwarmMessage was failing with URL_INVALID for bare paths - FIXED by URL normalization in createLibSQLAdapter\n- Test isolation issue: tests writing to prod .hive/ instead of temp directories\n- 3 \"E2E Test Epic\" artifacts + 6 subtasks need cleanup from issues.jsonl\n- 1 test memory needs removal from memories.jsonl","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-22T16:42:02.730Z","updated_at":"2025-12-22T16:53:23.084Z","closed_at":"2025-12-22T16:53:23.084Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjhdvwcftl0","title":"Fix test isolation - prevent tests writing to prod .hive/","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T16:42:02.752Z","updated_at":"2025-12-22T16:53:15.728Z","closed_at":"2025-12-22T16:53:15.728Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjhdvwbu2iv","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjhdvwcigod","title":"Verify sendSwarmMessage URL fix and unskip tests","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T16:42:02.754Z","updated_at":"2025-12-22T16:53:16.991Z","closed_at":"2025-12-22T16:53:16.991Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjhdvwbu2iv","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjhdvwckiyk","title":"Close duplicate/orphan cells and sync","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T16:42:02.756Z","updated_at":"2025-12-22T16:53:17.768Z","closed_at":"2025-12-22T16:53:17.768Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjhdvwbu2iv","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjhef7g97ss","title":"Fix getInbox returns empty in swarm-review integration tests","description":"Bug: swarm-review.integration.test.ts tests pass sendSwarmMessage but getInbox returns empty.\n\nHypothesis from semantic memory:\n- sendSwarmMessage creates its own LibSQLAdapter\n- Test uses a different in-memory adapter instance\n- Messages written to one DB, read from another = empty\n\nTDD approach:\n1. Write/unskip failing test that reproduces the bug\n2. Trace the adapter creation path\n3. Fix the adapter sharing issue\n4. Verify test passes","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-22T16:57:03.609Z","updated_at":"2025-12-22T17:10:48.958Z","closed_at":"2025-12-22T17:10:48.958Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjhef7gh5cy","title":"Investigate and fix getInbox empty bug with TDD","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-22T16:57:03.617Z","updated_at":"2025-12-22T17:10:48.320Z","closed_at":"2025-12-22T17:10:48.320Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjhef7g97ss","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjhfac87zak","title":"Resolve PR #54 Comments + Create pr-triage Skill","description":"Hybrid approach: fix code issues with TDD, reply won't-fix to minor/style issues, create reusable pr-triage skill for future PR reviews. All 5 subtasks can run in parallel.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-22T17:21:16.135Z","updated_at":"2025-12-22T17:30:53.519Z","closed_at":"2025-12-22T17:30:53.519Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjhfac8da6s","title":"Create pr-triage skill with context-efficient patterns","description":"Create a new skill at .opencode/skills/pr-triage/ (PROJECT-LEVEL, not global) that teaches agents how to efficiently triage and respond to PR comments.\n\nKEY REQUIREMENTS:\n1. SKILL.md must include:\n   - Context-efficient workflow: fetch metadata first (id, path, line, severity), only fetch full body when needed\n   - gh API patterns for listing comments without blowing context\n   - Triage categories: fix-with-code, won't-fix, tracked-in-cell\n   - Response templates for each category\n   - CodeRabbit-specific patterns (severity markers, proposed fixes)\n\n2. references/gh-api-patterns.md with:\n   - Compact jq queries for comment metadata\n   - Thread detection (in_reply_to_id)\n   - Severity extraction from CodeRabbit format\n   - Reply posting via gh api\n\nUse skills_create tool with scope=\"project\" to create the skill, then add content.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T17:21:16.141Z","updated_at":"2025-12-22T17:28:57.715Z","closed_at":"2025-12-22T17:28:57.715Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjhfac87zak","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjhfac8fxvn","title":"Reply to .hive/issues.jsonl comments (already cleaned)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T17:21:16.143Z","updated_at":"2025-12-22T17:28:59.215Z","closed_at":"2025-12-22T17:28:59.215Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjhfac87zak","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjhfac8ielf","title":"Fix adapter.test.ts - add closed_reason verification (TDD)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T17:21:16.146Z","updated_at":"2025-12-22T17:29:00.141Z","closed_at":"2025-12-22T17:29:00.141Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjhfac87zak","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjhfac8kn2t","title":"Fix agent-mail.ts DurableLock error handling (TDD)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T17:21:16.148Z","updated_at":"2025-12-22T17:29:01.286Z","closed_at":"2025-12-22T17:29:01.286Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjhfac87zak","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjhfac8lnmh","title":"Reply won't-fix to minor/style comments","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-22T17:21:16.149Z","updated_at":"2025-12-22T17:29:02.301Z","closed_at":"2025-12-22T17:29:02.301Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjhfac87zak","dependencies":[],"labels":[],"comments":[]}
